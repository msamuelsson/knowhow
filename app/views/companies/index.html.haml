-#  This file is app/views/companies/index.html.haml

%h1 Welcome to knowhow

%div#header
  = form_tag companies_path, :id => "areas_form", :method => :get do
    %p Select Buisness Area:
    - @all_areas.each do |area|
      = area
      = check_box_tag "areas[#{area}]", 1, if params[:areas]; params[:areas].include?(area); else true; end, :id => "areas_#{area}"
      -#= check_box_tag "areas[#{area}]", 1, @selected_areas.include?(area), :id => "areas_#{area}"
    = submit_tag 'Refresh', :id => "areas_submit"


%div#right
  %table#companies
    %thead
      %tr
        %th Edit
        -# %th Compagnia
        %th{:class => (params[:sort] == 'compagnia'? "hilite" : nil)}= link_to "Compagnia", companies_path({:sort=>'compagnia'}) , :id => "company_header"
        %th Area
        %th Provvigioni
        %th Autore
        %th Ultimo Aggiornamento
        %th Canale 1
        %th Canale 2
        %th Interlocutore

    %tbody
      - @companies.each do |company|
        %tr
          %td= link_to 'Edit', edit_company_path(company)
          -#%td= link_to 'Edit', edit_company_path(company)
          %td= company.compagnia
          -#%td#more_info= link_to "#{company.compagnia}", company_path(company)
          %td= company.area
          %td= company.provvigione
          %td= company.autore
          %td= company.aggiornamento
          %td= company.canale_1
          %td= company.canale_2
          %td= company.interlocutore

  = link_to 'Add new company', new_company_path
